import{m as T,f as U,V as X}from"./VField.3e33e8b0.js";import{m as G,f as J,a as K}from"./VInput.e543e841.js";import{f as W}from"./forwardRefs.c003b6b8.js";import{X as Y,R as Z,N as ee,O as le,P as c,bi as R,x as p,Q as te,aq as ne,b as n,p as C,F as V,ay as $,a1 as ae}from"./index.65c54066.js";import{V as oe}from"./VChip.d2564180.js";import{V as ue}from"./VCounter.c21e8434.js";const me=Y({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...G({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>Z(e).every(v=>v!=null&&typeof v=="object")},...T({clearable:!0})},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,v){let{attrs:w,emit:A,slots:a}=v;const{t:k}=ee(),o=le(e,"modelValue"),h=c(()=>typeof e.showSize!="boolean"?e.showSize:void 0),I=c(()=>{var l;return((l=o.value)!=null?l:[]).reduce((t,u)=>{let{size:d=0}=u;return t+d},0)}),S=c(()=>R(I.value,h.value)),g=c(()=>{var l;return((l=o.value)!=null?l:[]).map(t=>{const{name:u="",size:d=0}=t;return e.showSize?`${u} (${R(d,h.value)})`:u})}),N=c(()=>{var u;var l;const t=(u=(l=o.value)==null?void 0:l.length)!=null?u:0;return e.showSize?k(e.counterSizeString,t,S.value):k(e.counterString,t)}),b=p(),F=p(),r=p(!1),i=p(),x=c(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function y(){if(i.value!==document.activeElement){var l;(l=i.value)==null||l.focus()}r.value||(r.value=!0)}function D(l){$(e["onClick:prepend"],l),P(l)}function P(l){var t;(t=i.value)==null||t.click(),A("click:control",l)}function _(l){l.stopPropagation(),y(),ae(()=>{o.value=[],i!=null&&i.value&&(i.value.value=""),$(e["onClick:clear"],l)})}return te(()=>{const l=!!(a.counter||e.counter),t=!!(l||a.details),[u,d]=ne(w),[{modelValue:ie,...j}]=J(e),[E]=U(e);return n(K,C({ref:b,modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,class:"v-file-input","onClick:prepend":D,"onClick:append":e["onClick:append"]},u,j,{focused:r.value,messages:x.value}),{...a,default:f=>{let{isDisabled:m,isDirty:z,isReadonly:H,isValid:q}=f;return n(X,C({ref:F,"prepend-icon":e.prependIcon,"onClick:control":P,"onClick:clear":_,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},E,{active:z.value||r.value,dirty:z.value,focused:r.value,error:q.value===!1}),{...a,default:L=>{let{props:{class:M,...O}}=L;return n(V,null,[n("input",C({ref:i,type:"file",readonly:H.value,disabled:m.value,multiple:e.multiple,name:e.name,onClick:s=>{s.stopPropagation(),y()},onChange:s=>{var B;if(!s.target)return;const Q=s.target;o.value=[...(B=Q.files)!=null?B:[]]},onFocus:y,onBlur:()=>r.value=!1},O,d),null),n("div",{class:M},[o.value.length>0&&(a.selection?a.selection({fileNames:g.value,totalBytes:I.value,totalBytesReadable:S.value}):e.chips?g.value.map(s=>n(oe,{key:s,size:"small",color:e.color},{default:()=>[s]})):g.value.join(", "))])])}})},details:t?f=>{var m;return n(V,null,[(m=a.details)==null?void 0:m.call(a,f),l&&n(V,null,[n("span",null,null),n(ue,{active:!!o.value.length,value:N.value},a.counter)])])}:void 0})}),W({},b,F,i)}});export{me as V};
